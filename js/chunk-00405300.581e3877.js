(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00405300"],{"0000":function(e,t,n){"use strict";n("c9ef")},"4e2c":function(e,t,n){},"63e3":function(e,t,n){"use strict";n("4e2c")},"9e3a":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),o=function(e){return Object(c["pushScopeId"])("data-v-a4d37df0"),e=e(),Object(c["popScopeId"])(),e},a={class:"container mt-8 mt-sm-10 mb-5"},r=o((function(){return Object(c["createElementVNode"])("h2",{class:"title text-center mb-5 pt-3"},[Object(c["createElementVNode"])("span",{class:"decorate"},"確認訂單")],-1)})),l={class:"text-center pb-2 border-bottom mb-5"},d={key:0,class:"fs-5 fw-bold"},s=Object(c["createTextVNode"])(" 請確認您的資料無誤後付款 "),i=o((function(){return Object(c["createElementVNode"])("span",{class:"text-danger"},"( 未付款 )",-1)})),u=[s,i],b={key:1,class:"badge text-success fs-5 fw-bold",style:{"background-color":"#D0E838"}},m=Object(c["createTextVNode"])("已付款 "),p=o((function(){return Object(c["createElementVNode"])("i",{class:"bi bi-check2"},null,-1)})),O=[m,p],j={class:"mb-3 text-center"},f=o((function(){return Object(c["createElementVNode"])("span",null," 訂單 ",-1)})),E=["data-clipboard-text"],N=["data-clipboard-text"],V=Object(c["createTextVNode"])(" 複製 "),h=o((function(){return Object(c["createElementVNode"])("i",{class:"bi bi-check-lg"},null,-1)})),y=[h],g={class:"table mx-auto align-middle mb-5 text-primary"},v=o((function(){return Object(c["createElementVNode"])("tr",null,null,-1)})),k=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"訂購日期")],-1)})),_=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"姓名")],-1)})),x=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"Email")],-1)})),S=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"電話")],-1)})),C=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"地址")],-1)})),B=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"訂購產品")],-1)})),I={class:"list-unstyled"},M={class:"mb-1"},w=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"付款金額")],-1)})),L=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"付款方式")],-1)})),D=o((function(){return Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("span",{class:"fs-5"},"付款狀態")],-1)})),$={key:0,class:"fw-bold text-danger fs-5"},T={key:1,class:"badge text-success fs-5"},F=Object(c["createTextVNode"])("已付款 "),z=o((function(){return Object(c["createElementVNode"])("i",{class:"bi bi-check2"},null,-1)})),q=[F,z],J=o((function(){return Object(c["createElementVNode"])("i",{class:"bi bi-cash-coin"},null,-1)})),P=Object(c["createTextVNode"])(" 確認付款 "),U=[J,P],X=o((function(){return Object(c["createElementVNode"])("div",{class:"cssload-container"},[Object(c["createElementVNode"])("div",{class:"cssload-dot"}),Object(c["createElementVNode"])("div",{class:"step",id:"cssload-s1"}),Object(c["createElementVNode"])("div",{class:"step",id:"cssload-s2"}),Object(c["createElementVNode"])("div",{class:"step",id:"cssload-s3"})],-1)}));function A(e,t,n,o,s,i){var m=Object(c["resolveComponent"])("CartTimeLine"),p=Object(c["resolveComponent"])("OrderConfirmModal"),h=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",a,[r,Object(c["createVNode"])(m,{is_pay:s.is_pay},null,8,["is_pay"]),Object(c["createElementVNode"])("h3",l,[s.is_pay?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",b,O)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",d,u))]),Object(c["createElementVNode"])("div",j,[f,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline text-primary border-bottom tag-read","data-clipboard-text":s.orderId,onClick:t[0]||(t[0]=function(){return i.copy&&i.copy.apply(i,arguments)})},Object(c["toDisplayString"])(s.order.id),9,E),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm ms-2 tag-read","data-clipboard-text":s.orderId,onClick:t[1]||(t[1]=function(){return i.copy&&i.copy.apply(i,arguments)})},[V,Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["copy_point text-success badge bg-primary",{"d-none":!s.copy_point}])},y,2)],8,N)]),Object(c["createElementVNode"])("table",g,[Object(c["createElementVNode"])("tbody",null,[v,Object(c["createElementVNode"])("tr",null,[k,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(s.create_at),1)]),Object(c["createElementVNode"])("tr",null,[_,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(s.order_user.name),1)]),Object(c["createElementVNode"])("tr",null,[x,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(s.order_user.email),1)]),Object(c["createElementVNode"])("tr",null,[S,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(s.order_user.tel),1)]),Object(c["createElementVNode"])("tr",null,[C,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(s.order_user.address),1)]),Object(c["createElementVNode"])("tr",null,[B,Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",I,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(s.order.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e},[Object(c["createElementVNode"])("span",M,Object(c["toDisplayString"])(e.product.title)+" x "+Object(c["toDisplayString"])(e.qty),1)])})),128))])])]),Object(c["createElementVNode"])("tr",null,[w,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$thousandths(s.order.total))+" 元 ",1)]),Object(c["createElementVNode"])("tr",null,[L,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(s.order_user.pay_method),1)]),Object(c["createElementVNode"])("tr",null,[D,Object(c["createElementVNode"])("td",null,[s.is_pay?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",T,q)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",$," 未付款 "))])])])]),s.is_pay?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,type:"button",class:"d-block mx-auto btn btn-danger active_bigger fs-4 animation_hover",title:"結帳",onClick:t[2]||(t[2]=function(){return i.openConfirmModal&&i.openConfirmModal.apply(i,arguments)})},U))]),Object(c["createVNode"])(p,{onPayment:i.payment},null,8,["onPayment"]),Object(c["createVNode"])(h,{active:s.isLoading,"onUpdate:active":t[3]||(t[3]=function(e){return s.isLoading=e})},{default:Object(c["withCtx"])((function(){return[X]})),_:1},8,["active"])],64)}n("99af");var G=n("b311"),H=n.n(G),K=n("f94c"),Q=function(e){return Object(c["pushScopeId"])("data-v-2d321fd2"),e=e(),Object(c["popScopeId"])(),e},R={class:"modal",tabindex:"-1"},W={class:"modal-dialog modal-dialog-centered"},Y={class:"modal-content"},Z=Object(c["createStaticVNode"])('<div class="modal-header" data-v-2d321fd2><h5 class="modal-title text-primary fw-bold" data-v-2d321fd2><i class="bi bi-exclamation-octagon-fill fs-4" data-v-2d321fd2></i> 注意 </h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-2d321fd2></button></div><div class="modal-body" data-v-2d321fd2><h4 data-v-2d321fd2>請確認您的資料是否正確</h4><p data-v-2d321fd2>如果資料正確，即可按下確認付款。</p></div>',2),ee={class:"modal-footer"},te=Q((function(){return Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary","data-bs-dismiss":"modal"},"取消",-1)}));function ne(e,t,n,o,a,r){var l=this,d=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",R,[Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("div",Y,[Z,Object(c["createElementVNode"])("div",ee,[te,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(e){return l.$emit("payment")})},"確認結帳")])])])]),Object(c["createVNode"])(d,{active:a.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return a.isLoading=e})},null,8,["active"])],64)}var ce=n("7c2b"),oe=n.n(ce),ae={inject:["emitter"],data:function(){return{confirmModal:"",isLoading:!1}},mounted:function(){var e=this;this.confirmModal=new oe.a(document.querySelector(".modal")),this.emitter.on("openConfirmModal",(function(t){"開啟"===t?e.confirmModal.show():e.confirmModal.hide()}))},unmounted:function(){this.emitter.off("openConfirmModal")}},re=(n("0000"),n("d959")),le=n.n(re);const de=le()(ae,[["render",ne],["__scopeId","data-v-2d321fd2"]]);var se=de,ie={inject:["emitter"],components:{CartTimeLine:K["a"],OrderConfirmModal:se},data:function(){return{order_user:[],orderId:"",order:[],create_at:0,is_pay:!1,isLoading:!1,copy_point:!1}},methods:{getOrder:function(){var e=this;if(this.orderId){var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("mizupath72","/order/").concat(this.orderId);this.$http.get(t).then((function(t){e.order_user=t.data.order.user,e.order=t.data.order;var n=new Date(1e3*e.order.create_at).toISOString().substring(0,10);e.create_at=n,e.is_pay=t.data.order.is_paid}))}},openConfirmModal:function(){this.emitter.emit("openConfirmModal","開啟")},payment:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("mizupath72","/pay/").concat(this.orderId);this.$http.post(t).then((function(t){e.isLoading=!1,e.$httpMessageState(t.data.success,"付款"),e.emitter.emit("openConfirmModal","關閉"),e.emitter.emit("get_cart"),setTimeout((function(){e.emitter.emit("get_orderId",e.orderId)}),1e3),e.$router.push("/order_completed")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response.success,"付款"),e.emitter.emit("openConfirmModal","關閉")}))},copy:function(){var e=this,t=new H.a(".tag-read");t.on("success",(function(n){e.copy_point=!0,e.$httpMessageState(!0,"複製"),t.destroy()})),t.on("error",(function(n){e.$httpMessageState(!1,"該瀏覽器不支援，複製"),t.destroy()}))}},mounted:function(){this.orderId=this.$route.params.orderId,this.getOrder()}};n("63e3");const ue=le()(ie,[["render",A],["__scopeId","data-v-a4d37df0"]]);t["default"]=ue},b0c0:function(e,t,n){var c=n("83ab"),o=n("5e77").EXISTS,a=n("e330"),r=n("9bf2").f,l=Function.prototype,d=a(l.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=a(s.exec),u="name";c&&!o&&r(l,u,{configurable:!0,get:function(){try{return i(s,d(this))[1]}catch(e){return""}}})},c9ef:function(e,t,n){}}]);
//# sourceMappingURL=chunk-00405300.581e3877.js.map